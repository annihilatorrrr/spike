#!/usr/bin/env php
<?php
use React\EventLoop\Loop;
use Symfony\Component\Console\Input\ArgvInput;
use Spike\Application;
use Spike\Console\Output\AsyncConsoleOutput;

foreach ([__DIR__ . '/../../../autoload.php',
             __DIR__ . '/../vendor/autoload.php'] as $autoloadFile) {
    if (is_file($autoloadFile)) {
        include $autoloadFile;
        break;
    }
}

$loop = Loop::get();

$app = new Application($loop);

$output = new AsyncConsoleOutput();
$output->setLoop($loop);
$app->run(new ArgvInput(), $output);